# Determine the current page
execute store result score @s ld_result run data get entity @s HandItems[0].tag.LockdownRecipePage

# Increment the page if the player is standing and not on the last page
execute if score @s ld_result matches ..17 if entity @p[predicate=!lockdown:sneaking,distance=..1,sort=nearest,limit=1] run scoreboard players add @s ld_result 1

# Decrement the page if the player is sneaking and not on the cover page
execute if score @s ld_result matches 1.. if entity @p[predicate=lockdown:sneaking,sort=nearest,limit=1] run scoreboard players remove @s ld_result 1

# Give the player the corresponding page
execute if entity @p[gamemode=creative] run clear @p minecraft:book{LockdownRecipeBook:1b} 1
execute if entity @s[scores={ld_result=0}] run give @p book{display:{Name:'{"text":"Recipe Guide","italic":"false"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10001,LockdownRecipeBook:1b,LockdownRecipePage:0}
execute if entity @s[scores={ld_result=1}] run give @p book{display:{Name:'{"text":"Encoder","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10002,LockdownRecipeBook:1b,LockdownRecipePage:1}
execute if entity @s[scores={ld_result=2}] run give @p book{display:{Name:'{"text":"Keycard Reader","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10003,LockdownRecipeBook:1b,LockdownRecipePage:2}
execute if entity @s[scores={ld_result=3}] run give @p book{display:{Name:'{"text":"Keycard","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10004,LockdownRecipeBook:1b,LockdownRecipePage:3}
execute if entity @s[scores={ld_result=4}] run give @p book{display:{Name:'{"text":"Alarm","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10005,LockdownRecipeBook:1b,LockdownRecipePage:4}
execute if entity @s[scores={ld_result=5}] run give @p book{display:{Name:'{"text":"Big Button","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10006,LockdownRecipeBook:1b,LockdownRecipePage:5}
execute if entity @s[scores={ld_result=6}] run give @p book{display:{Name:'{"text":"Defense Drone","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10007,LockdownRecipeBook:1b,LockdownRecipePage:6}
execute if entity @s[scores={ld_result=7}] run give @p book{display:{Name:'{"text":"Player Detector","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10008,LockdownRecipeBook:1b,LockdownRecipePage:7}
execute if entity @s[scores={ld_result=8}] run give @p book{display:{Name:'{"text":"Mob Detector","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10009,LockdownRecipeBook:1b,LockdownRecipePage:8}
execute if entity @s[scores={ld_result=9}] run give @p book{display:{Name:'{"text":"Klaxon","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10010,LockdownRecipeBook:1b,LockdownRecipePage:9}
execute if entity @s[scores={ld_result=10}] run give @p book{display:{Name:'{"text":"Laser Projector","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10011,LockdownRecipeBook:1b,LockdownRecipePage:10}
execute if entity @s[scores={ld_result=11}] run give @p book{display:{Name:'{"text":"Redstone Transmitter","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10012,LockdownRecipeBook:1b,LockdownRecipePage:11}
execute if entity @s[scores={ld_result=12}] run give @p book{display:{Name:'{"text":"Redstone Receiver","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10013,LockdownRecipeBook:1b,LockdownRecipePage:12}
execute if entity @s[scores={ld_result=13}] run give @p book{display:{Name:'{"text":"Force Field Projector","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10014,LockdownRecipeBook:1b,LockdownRecipePage:13}
execute if entity @s[scores={ld_result=14}] run give @p book{display:{Name:'{"text":"Laser Turret","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10015,LockdownRecipeBook:1b,LockdownRecipePage:14}
execute if entity @s[scores={ld_result=15}] run give @p book{display:{Name:'{"text":"Drone Control Tower Upgrade","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10016,LockdownRecipeBook:1b,LockdownRecipePage:15}
execute if entity @s[scores={ld_result=16}] run give @p book{display:{Name:'{"text":"Drone Control Tower","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10017,LockdownRecipeBook:1b,LockdownRecipePage:16}
execute if entity @s[scores={ld_result=17}] run give @p book{display:{Name:'{"text":"Durability Upgrade","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10018,LockdownRecipeBook:1b,LockdownRecipePage:17}
execute if entity @s[scores={ld_result=18}] run give @p book{display:{Name:'{"text":"Flamethrower Upgrade","italic":"false","color":"dark_green"}',Lore:['["",{"text":"Previous Page: ","color":"blue","italic":"false"},{"keybind":"key.sneak","color":"blue","italic":"false"},{"text":" + ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]','["",{"text":"Next Page: ","color":"blue","italic":"false"},{"keybind":"key.use","color":"blue","italic":"false"}]']},CustomModelData:10019,LockdownRecipeBook:1b,LockdownRecipePage:18}

# Play sound effects
stopsound @p neutral minecraft:item.armor.equip_generic
playsound minecraft:item.book.page_turn block @a ~ ~ ~ 1 1
